*** Java_CodeGen.old	2010-05-31 10:13:44.000000000 +0200
--- Java_CodeGen.jrag	2010-05-31 10:22:55.000000000 +0200
***************
*** 445,450 ****
--- 445,452 ----
      String prefix = "";
      for (int i = 0 ; i < getNumExp() ; i++) {
        String limit = getExp(i).Java_emitEncoder(env, name + prefix);
+       env.println("{");
+       env.indent();
        env.println("int i_" + (baseDepth + i) + "_max = " + limit + ";");
        prefix = prefix + "[0]";
      }
***************
*** 456,461 ****
--- 458,465 ----
      for (int i = 0 ; i < getNumExp() ; i++) {
        env.print_for_end();
      }
+     env.unindent();
+     env.println("}");
    }
    
    public String Exp.Java_emitEncoder(Java_env env, String name) {
